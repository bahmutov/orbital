machine:
  timezone:
    America/New_York
  node:
    version: 6.9.0
dependencies:
  pre:
    - echo "//registry.npmjs.org/:_authToken=$NPM_TOKEN" >> ~/.npmrc
  override:
    - npm install
compile: 
  override:
    - sh ./scripts/ci/build.sh
deployment:
  release:
      tag: /v[0-9]+(\.[0-9]+)*/
      owner: getcanal
      command: |
            if [ "${CIRCLE_BRANCH}" == "master" ]; then
              ./scripts/ci/deploy.sh
            else
              echo "We are on ${CIRCLE_BRANCH} branch, not going to update docs."
            fi